= About the FTPS Connector
:keywords: FTPS, connector
:toc:
:toc-title:

The FTPS Connector the functionality of connecting to FTP Servers in the same way
as the link:ftp-connector[FTP Connector], but adding the support for the link:/mule4-user-guide/v/4.1/tls-configuration[Transport Layer Security (TLS)].

== Configuration Creation

To create a basic FTPS Connection is required the host, where the FTPS server
is placed, additionally the Port, which defaults to 21, can be also configured.
Lately if the server runs with some security, username and password can be placed.

[source, xml, linenums]
----
<ftps:config name="FTPS_Config">
  <ftps:connection username="anonymous" password="password"
   host="0.0.0.0" port="21" workingDir="${workingDir}">
    <tls:context>
        <tls:trust-store path="path/to/keystore" password="mulepassword" />
    </tls:context>
  </ftps:connection>
</ftps:config>
----

* For more on SSL configuration in Mule, see link:/mule4-user-guide/v/4.1/tls-configuration[About TLS Configuration].
* For more on other functionality provided by this connector, see link:ftp-connector[FTP Connector Documentation Reference].

=== FTPS Mode
*Since 1.4.0*

==== Explicit

The default way to connect to the FTP Server, which connects in a unprotected way
to the server and later the client can negotiate TLS for either the command or data
channel.

===== Data Channel Protection Level (PROT)

In the FTPS Connector two protection levels can be configured:

 * *Clear* (Default) : The default protection level if no other level is specified is
 Clear. The Clear protection level indicates that the data channel will carry
 the raw data of the file transfer, with no security applied.
 * *Private*: The Private protection level indicates that the data will be
 integrity and confidentiality protected.


[source, xml, linenums]
----
 <ftps:config name="FTPS_Config">
   <ftps:connection username="anonymous" password="password"
    host="0.0.0.0" port="21" workingDir="${workingDir}">
     <tls:context>
         <tls:trust-store path="path/to/keystore" password="mulepassword" />
     </tls:context>
     <ftps:ftps-mode >
         <ftps:ftps-explicit-mode protSetting="PRIVATE" />
     </ftps:ftps-mode>
   </ftps:connection>
 </ftps:config>
----

image:ftps-prot-setting.png[FTPS Data Channel Protection Level]

==== Implicit

FTPS Implicit mode assumes that a secure connection, a SSL/TLS Handshake must be
done before any FTP command is sent, this makes that the entire FTP session
will be encrypted.

[source, xml, linenums]
----
<ftps:config name="FTPS_Config">
  <ftps:connection username="anonymous" password="password"
   host="0.0.0.0" port="21" workingDir="${workingDir}">
    <tls:context>
        <tls:trust-store path="path/to/keystore" password="mulepassword" />
    </tls:context>
    <ftps:ftps-mode >
        <ftps:ftps-implicit-mode />
    </ftps:ftps-mode>
  </ftps:connection>
</ftps:config>
----

== Installing the Connector

To use the FTPS module, you simply add it to your Mule app through the Studio or Flow Designer UI, or you can add the following dependency in your `pom.xml` file:

[source,XML,linenums]
----
<dependency>
    <groupId>com.mulesoft.connectors</groupId>
    <artifactId>mule-ftps-connector</artifactId>
    <version>1.4.0</version> <!-- or newer -->
    <classifier>mule-plugin</classifier>
</dependency>
----

== TLS Configuration with Keystores and Truststores

You can use Transport Layer Security (TLS) and configure FTPS by providing a key store with your certificate. You can also enable 2-way authentication by providing a trust store. For details, see link:/mule4-user-guide/v/4.1/tls-configuration[Configure TLS with Keystores and Truststores].

[[see_also]]
== See Also

* link:ftp-connector[FTP Connector Documentation]
* link:ftps-documentation[FTPS Connector Technical Reference]
